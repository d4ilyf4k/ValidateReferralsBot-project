# **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: Telegram-–±–æ—Ç ¬´–†–µ—Ñ–µ—Ä–∞–ª—ã –ë–∞–Ω–∫–æ–≤¬ª**

## **1. –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ**

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –æ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –±–æ–Ω—É—Å–æ–≤¬†**–¢-–ë–∞–Ω–∫–∞ –∏ –ê–ª—å—Ñ–∞-–ë–∞–Ω–∫–∞**, —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –¥–ª—è —Ä–µ—Ñ–µ—Ä–µ—Ä–∞ –∏ —Ä–µ—Ñ–µ—Ä–∞–ª–∞, –∞ —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å –≤¬†**JSON**¬†–∏ —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–º –≤–∏–¥–µ. –í—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è ‚Äî —á–µ—Ä–µ–∑ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–µ¬†**–∏–Ω–ª–∞–π–Ω- –∏ reply-–∫–Ω–æ–ø–∫–∏**. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Äî –ø–æ—à–∞–≥–æ–≤–∞—è —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è¬†**–ø–æ–∏—Å–∫, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ –ø–æ–ª–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö**. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–≤—ã) –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–¥–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UTM-—Å—Å—ã–ª–∫–∞–º–∏. –†–µ—Ñ–µ—Ä–∞–ª—ã –∏–∑ –ª—é–±—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤ –†–§ (–∏ –Ω–µ —Ç–æ–ª—å–∫–æ) –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è. –ü—Ä–æ—Ñ–∏–ª—å –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –ø–æ–ª—è–º –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ª–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

---

## **2. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**

### **2.1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª–∞ (`/start`)**

- **–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ**:  
    –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ ‚Äî –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±–æ—Ç–∞ –∏ –∫–Ω–æ–ø–∫–∞¬†**¬´–ù–∞—á–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é¬ª**.  
    –î–ª—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫—Ä–∞—Ç–∫–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –∏ –∫–Ω–æ–ø–æ–∫:
    
    - üìä¬†**–°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏**,
    - üí∞¬†**–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á—ë—Ç**,
    - ‚úèÔ∏è¬†**–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å**,
    - üóë¬†**–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é**.
        
- **–ü–æ—à–∞–≥–æ–≤—ã–π –¥–∏–∞–ª–æ–≥**¬†(—á–µ—Ä–µ–∑¬†`FSM`¬†—Å–æ states):  
    –ö–∞–∂–¥—ã–π —à–∞–≥ –≤–∫–ª—é—á–∞–µ—Ç:
    - –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ –∏ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–µ—Å–ª–∏ —É–∂–µ –≤–≤–µ–¥–µ–Ω–æ).
    - Reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏: ‚óÄÔ∏è¬†**–ù–∞–∑–∞–¥**, ‚ñ∂Ô∏è¬†**–î–∞–ª–µ–µ**.  
        **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —à–∞–≥–æ–≤**:
    
    1. **–§–ò–û**¬†(–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): —Ç–µ–∫—Å—Ç, –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Ñ–æ—Ä–º–∞—Ç (–º–∏–Ω–∏–º—É–º 2 —Å–ª–æ–≤–∞, –∫–∏—Ä–∏–ª–ª–∏—Ü–∞).
    2. **–¢–µ–ª–µ—Ñ–æ–Ω**¬†(–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): –∫–Ω–æ–ø–∫–∞¬†**¬´üì± –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä¬ª**¬†(`request_contact=True`).
    3. **–ë–∞–Ω–∫**¬†(–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): üè¶¬†**–¢-–ë–∞–Ω–∫**¬†/ üè¶¬†**–ê–ª—å—Ñ–∞-–ë–∞–Ω–∫**¬†(reply-–∫–Ω–æ–ø–∫–∏).
    4. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**:
        - –°–≤–æ–¥–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è + ‚úÖ¬†**–°–æ—Ö—Ä–∞–Ω–∏—Ç—å**¬†/ üîÅ¬†**–ò–∑–º–µ–Ω–∏—Ç—å**.

> üîê –í—Å–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–≤–∫–ª—é—á–∞—è —Ç–µ–ª–µ—Ñ–æ–Ω)¬†**—à–∏—Ñ—Ä—É—é—Ç—Å—è**¬†–ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤ –ë–î —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º¬†`Fernet`.

---

### **2.2. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (–¥–ª—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤)**

–ü–æ—Å–ª–µ¬†`/start`¬†–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –º–µ–Ω—é —Å¬†**reply-–∫–Ω–æ–ø–∫–∞–º–∏**.

#### **2.2.1. ‚ÑπÔ∏è ¬´–ü–æ–º–æ—â—å¬ª**

- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫—Ä–∞—Ç–∫—É—é —Å–ø—Ä–∞–≤–∫—É –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º –±–æ—Ç–∞ –∏ –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ–º–∞–Ω–¥–∞–º.
- –°–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—à–∞–≥–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–Ω—É—Å–∞ –∏ —É—Å–ª–æ–≤–∏—è –¥–ª—è –¢-–ë–∞–Ω–∫–∞ –∏ –ê–ª—å—Ñ–∞-–ë–∞–Ω–∫–∞.
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (–≤–∞—à–µ–≥–æ –¥—Ä—É–≥–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–≥–ª–∞—Å–∏–ª —Ä–µ—Ñ–µ—Ä–∞–ª–∞).

#### **2.2.2. üìä ¬´–°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏¬ª**

- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø–æ —ç—Ç–∞–ø–∞–º (`card_activated`,¬†`purchase_made`).
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—É–º–º—É –±–æ–Ω—É—Å–∞ –∏ –µ–≥–æ —Å—Ç–∞—Ç—É—Å (`–æ–∂–∏–¥–∞–µ—Ç`,¬†`–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ`).
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ª—é–±–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è.

#### **2.2.3. üí∞ ¬´–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á—ë—Ç¬ª**

- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç¬†**–ø–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç**¬†—Å —É—Å–ª–æ–≤–∏—è–º–∏ –±–æ–Ω—É—Å–∞ –∏ —Å—Ç–∞—Ç—É—Å–æ–º –≤—ã–ø–ª–∞—Ç—ã.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É¬†**`/status`**¬†(–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –∫–Ω–æ–ø–∫–µ).

#### **2.2.4. ‚úèÔ∏è ¬´–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å¬ª**

- –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å: –§–ò–û, –Ω–æ–º–µ—Ä, –±–∞–Ω–∫, —Å—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–∞—Ü–∏–∏, –ø–æ–∫—É–ø–∫–∏.
- –ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ ‚Äî –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –±–æ–Ω—É—Å—ã.

#### **2.2.5. üè¶ ¬´–í—ã–±—Ä–∞—Ç—å –±–∞–Ω–∫¬ª**

- –î–ª—è –¢-–ë–∞–Ω–∫–∞: –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç¬†**–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–¥—É–∫—Ç–∞**¬†—Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–π UTM-—Å—Å—ã–ª–∫–æ–π.  
    –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –¢-–ë–∞–Ω–∫–∞:
    - **Tinkoff Black**¬†—Å –ø–æ–¥—Ç–∏–ø–∞–º–∏:  
        ‚Ä¢¬†**Classic**¬†(—Å –∞–∫—Ü–∏–µ–π ¬´–ó–æ–ª–æ—Ç–æ–π –ë–∏–ª–µ—Ç¬ª –¥–æ 24.12.2025)  
        ‚Ä¢¬†**–ê—Ä–æ–º–∞-–∫–∞—Ä—Ç–∞**¬†(–ø–∞—Ö–Ω–µ—Ç —à–æ–∫–æ–ª–∞–¥–æ–º –∏ –∫–æ–∫–æ—Å–æ–º)  
        ‚Ä¢¬†**–ú–æ–ª–æ–¥—ë–∂–Ω–∞—è**¬†(14‚Äì25 –ª–µ—Ç: 1% –∑–∞ –≤—Å—ë, –¥–æ 15% –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö, –¥–æ 30% —É –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤)  
        ‚Ä¢¬†**–†–µ—Ç—Ä–æ**¬†(–¥–∏–∑–∞–π–Ω 2000-—Ö, –≤—ã–ø—É—Å–∫ 0 ‚ÇΩ –∏–ª–∏ 600 ‚ÇΩ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∫–∞—Ä—Ç—ã)
    - **–û—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã**:  
        ‚Ä¢¬†**Drive**¬†(–¥–æ 10% –Ω–∞ –ê–ó–°, –¥–æ 5% –Ω–∞ –∞–≤—Ç–æ—É—Å–ª—É–≥–∏, 1% –∑–∞ –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ)  
        ‚Ä¢¬†**Premium**  
        ‚Ä¢¬†**T-Mobile**
- –î–ª—è –ê–ª—å—Ñ–∞-–ë–∞–Ω–∫–∞: –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—ã–±–æ—Ä–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚Äî –≤ –ø–ª–∞–Ω–∞—Ö.
- –í—Å–µ —Ç–µ–∫—Å—Ç—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å—Ç—Ä–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –ª–µ–Ω–¥–∏–Ω–≥–∞–º.

#### **2.2.6. üóë ¬´–£–¥–∞–ª–∏—Ç—å –º–æ–∏ –¥–∞–Ω–Ω—ã–µ¬ª (`/delete_data`)**

- –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –§–ó-152).
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ¬´–Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è¬ª —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

---

### **2.3. –†–∞—Å—á—ë—Ç –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π**

- **–ü—Ä–∞–≤–∏–ª–∞ –≤—ã–ø–ª–∞—Ç**¬†–∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—É¬†`/set_offer_bonus`:
     ```python
    # –§–æ—Ä–º–∞—Ç: /set_offer_bonus <–ø—Ä–æ–¥—É–∫—Ç> <—Å—É–º–º–∞_–¥–æ_6%> <—Å—É–º–º–∞_–ø–æ—Å–ª–µ_6%>
    ```
    –ù–∞–ø—Ä–∏–º–µ—Ä:¬†`/set_offer_bonus black_classic 500 470`
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ –ø–æ–ª—è, –≤–ª–∏—è—é—â–µ–≥–æ –Ω–∞ —É—Å–ª–æ–≤–∏—è (`card_activated`,¬†`purchase_made`), —Å–∏—Å—Ç–µ–º–∞:
    1. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —Å —É—Å–ª–æ–≤–∏—è–º–∏,
    2. –ï—Å–ª–∏ –≤—Å–µ —É—Å–ª–æ–≤–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã ‚Äî —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç¬†`bonus_status = "confirmed"`,
    3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—É–º–º—É (—Å —É—á—ë—Ç–æ–º –ù–ü–î 6%) –∏ –¥–∞—Ç—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.
- **–†–∞—Å—á—ë—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ª—é–±–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è**.

---

### **2.4. –£—á—ë—Ç –¥–∞–Ω–Ω—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–∞**

- –ö–∞–∂–¥—ã–π —ç—Ç–∞–ø —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î —Å –¥–∞—Ç–æ–π –∏ —Ñ–ª–∞–≥–æ–º.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç.
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –∞—É–¥–∏—Ç–∞.

---

### **2.5. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è**

#### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è**

- –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è¬†**—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é**¬†–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª–∏ –≤—Å–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–Ω—É—Å–∞.
- –°–æ–æ–±—â–µ–Ω–∏–µ: ¬´üëã –ü—Ä–∏–≤–µ—Ç! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ç—É—Å –≤–∞—à–µ–π –∑–∞—è–≤–∫–∏ ‚Äî —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º –±—ã—Å—Ç—Ä–µ–µ –Ω–∞—á–∏—Å–ª–∏—Ç—å –±–æ–Ω—É—Å!¬ª

#### **–†—É—á–Ω–æ–π —Ç—Ä–∏–≥–≥–µ—Ä**

- –ö–æ–º–∞–Ω–¥–∞¬†`/remind +79161234567`:
    - –ù–∞—Ö–æ–¥–∏—Ç —Ä–µ—Ñ–µ—Ä–∞–ª–∞,
    - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ,
    - –õ–æ–≥–∏—Ä—É–µ—Ç —Ñ–∞–∫—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏.

---

### **2.6. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã**

- `/start`¬†‚Äî –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (–¥–ª—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö) –∏–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–¥–ª—è –Ω–æ–≤—ã—Ö).
- `/status`¬†‚Äî –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏.
- `/help`¬†‚Äî —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º –±–æ—Ç–∞.
- `/delete_data`¬†‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –∏ –Ω–∞—á–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∑–∞–Ω–æ–≤–æ.
- **–ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∞—Å –ø–æ¬†`user_id`)**:
    - `/report`¬†‚Äî –ø–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ –≤—Å–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª–∞–º –≤¬†**JSON**.
    - `/finance_total`¬†‚Äî —Å–≤–æ–¥–Ω—ã–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á—ë—Ç —Å —á–∏—Å—Ç—ã–º –¥–æ—Ö–æ–¥–æ–º (–ø–æ—Å–ª–µ –≤—ã—á–µ—Ç–∞ 6% –ù–ü–î).
    - `/finance_referral +79161234567`¬†‚Äî –æ—Ç—á—ë—Ç –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ä–µ—Ñ–µ—Ä–∞–ª—É.
    - `/find +79161234567`¬†‚Äî –ø–æ–∏—Å–∫ –ø–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º—É –Ω–æ–º–µ—Ä—É.
    - `/remind +79161234567`¬†‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä—É—á–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ.
    - `/update_link <–ø—Ä–æ–µ–∫—Ç> <–Ω–∞–∑–≤–∞–Ω–∏–µ_—Å—Å—ã–ª–∫–∏> <URL> <–±–æ—Ç> <–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞> <–∫–∞–º–ø–∞–Ω–∏—è>`¬†‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–º–∏ UTM-—Å—Å—ã–ª–∫–∞–º–∏.
    - `/set_offer_bonus <–ø—Ä–æ–¥—É–∫—Ç> <—Å—É–º–º–∞_–¥–æ_6%> <—Å—É–º–º–∞_–ø–æ—Å–ª–µ_6%>`¬†‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π –¥–ª—è —Ä–µ—Ñ–µ—Ä–æ—Ä–∞ (–∞–¥–º–∏–Ω–∞).

---

## **3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (SQLite)**

> üí° –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è¬†**SQLite**¬†–¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è (—Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ¬†`data/`). –õ–µ–≥–∫–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ PostgreSQL.

### **–¢–∞–±–ª–∏—Ü–∞¬†`users`**

|–ü–æ–ª–µ|–¢–∏–ø|–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å|
|---|---|---|
|`user_id`|INTEGER (PK)|–î–∞|
|`full_name`|TEXT|–î–∞|
|`phone_enc`|BLOB|–î–∞ (—à–∏—Ñ—Ä.)|
|`bank`|TEXT|–î–∞|
|`created_at`|DATETIME|–î–∞|

### **–¢–∞–±–ª–∏—Ü–∞¬†`referral_progress`**

|–ü–æ–ª–µ|–¢–∏–ø|
|---|---|
|`user_id`|INTEGER (PK)|
|`card_activated`|INTEGER|
|`card_activated_date`|TEXT|
|`purchase_made`|INTEGER|
|`first_purchase_date`|TEXT|

### **–¢–∞–±–ª–∏—Ü–∞¬†`financial_data`**

|–ü–æ–ª–µ|–¢–∏–ø|
|---|---|
|`user_id`|INTEGER (PK)|
|`bonus_amount`|INTEGER|
|`bonus_status`|TEXT|
|`bonus_confirmed_at`|DATETIME|
|`product_type`|TEXT|

### **–¢–∞–±–ª–∏—Ü–∞¬†`referral_links`**

|–ü–æ–ª–µ|–¢–∏–ø|
|---|---|
|`id`|INTEGER (PK)|
|`project`|TEXT|
|`link_name`|TEXT|
|`url`|TEXT|
|`bot_name`|TEXT|
|`platform`|TEXT|
|`campaign`|TEXT|
|`product_key`|TEXT|
|`created_at`|DATETIME|
|`updated_at`|DATETIME|

### **–¢–∞–±–ª–∏—Ü–∞¬†`offer_bonuses`**

|–ü–æ–ª–µ|–¢–∏–ø|
|---|---|
|`product_key`|TEXT (PK)|
|`amount_before_tax`|INTEGER|
|`amount_after_tax`|INTEGER|
|`updated_at`|DATETIME|

### **–¢–∞–±–ª–∏—Ü–∞¬†`reminders_log`**

|–ü–æ–ª–µ|–¢–∏–ø|
|---|---|
|`id`|INTEGER (PK)|
|`user_id`|INTEGER|
|`admin_id`|INTEGER|
|`sent_at`|DATETIME|
|`type`|TEXT|

---

## **4. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**

- **–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**: –†—É—Å—Å–∫–∏–π.
- **–§—Ä–µ–π–º–≤–æ—Ä–∫**:¬†`aiogram 3.x`¬†(–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º).
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**:¬†**SQLite**¬†(—Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ¬†`data/referrals.db`).
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
    - –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (`cryptography.fernet`),
    - –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã,
    - API-–∫–ª—é—á–∏ –∏¬†`BOT_TOKEN`¬†‚Äî –≤¬†`.env`.
- **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å**:
    - –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î,
    - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π (–∞–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã, —ç–∫—Å–ø–æ—Ä—Ç),
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ç–∞–±–ª–∏—Ü –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

---

## **5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**

- –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ ‚Äî¬†**–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**¬†(—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ UTM-—Å—Å—ã–ª–∫–∏).
- –†—É—á–Ω–æ–π –≤–≤–æ–¥ –¥–∞—Ç ‚Äî –≤ —Ñ–æ—Ä–º–∞—Ç–µ¬†`–î–î.–ú–ú.–ì–ì–ì–ì`¬†—Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π.
- –ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã¬†**—Ç–æ–ª—å–∫–æ –ø–æ –≤–∞—à–µ–º—É¬†`user_id`**.
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è¬†**—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é**.

---

## **6. –î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**

- –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤ –≤ Google Sheets.
- –í–µ–±-–ø–∞–Ω–µ–ª—å –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–º–∏ API –±–∞–Ω–∫–æ–≤ (–¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞). 
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –±–∞–Ω–∫–æ–≤ –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤.

---

### üå≤ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–≤ –≤–∏–¥–µ UNIX-–¥–µ—Ä–µ–≤–∞)**

```bash
referral_bot/

‚îú‚îÄ‚îÄ .env                    # BOT_TOKEN, DATABASE_URL, ADMIN_IDS, ENCRYPTION_KEY
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ main.py                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (main)
‚îÇ
‚îú‚îÄ‚îÄ data/                   # –ü–∞–ø–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
‚îÇ ‚îî‚îÄ‚îÄ referrals.db          # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ ‚îú‚îÄ‚îÄ __init__.py
‚îÇ ‚îî‚îÄ‚îÄ settings.py           # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ .env
‚îÇ
‚îú‚îÄ‚îÄ core/
‚îÇ ‚îú‚îÄ‚îÄ __init__.py
‚îÇ ‚îú‚îÄ‚îÄ bot_instance.py       # –°–æ–∑–¥–∞–Ω–∏–µ Application, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–æ–≤ –∏ JobQueue
‚îÇ ‚îî‚îÄ‚îÄ logger.py             # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–≥–µ—Ä–∞
‚îÇ
‚îú‚îÄ‚îÄ database/
‚îÇ ‚îú‚îÄ‚îÄ __init__.py
‚îÇ ‚îú‚îÄ‚îÄ models.py                # –û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ ‚îî‚îÄ‚îÄ db_manager.py            # –ö–ª–∞—Å—Å/—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å SQLite
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ ‚îú‚îÄ‚îÄ __init__.py
‚îÇ ‚îú‚îÄ‚îÄ bonus_calculator.py      # –†–∞—Å—á—ë—Ç –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º
‚îÇ ‚îú‚îÄ‚îÄ report_generator.py      # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JSON –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –æ—Ç—á—ë—Ç–æ–≤
‚îÇ ‚îî‚îÄ‚îÄ reminder_service.py      # –°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
‚îÇ
‚îú‚îÄ‚îÄ handlers/
‚îÇ ‚îú‚îÄ‚îÄ __init__.py
‚îÇ ‚îú‚îÄ‚îÄ start_handler.py         # /start + –º–µ–Ω—é
‚îÇ ‚îú‚îÄ‚îÄ onboarding_handler.py    # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (FSM)
‚îÇ ‚îú‚îÄ‚îÄ profile_handler.py       # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
‚îÇ ‚îú‚îÄ‚îÄ bank_handler.py          # –í—ã–±–æ—Ä –±–∞–Ω–∫–∞ –∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¢-–ë–∞–Ω–∫–∞
‚îÇ ‚îú‚îÄ‚îÄ status_handler.py        # –°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏
‚îÇ ‚îú‚îÄ‚îÄ finance_handler.py       # –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ—Ç—á—ë—Ç—ã
‚îÇ ‚îú‚îÄ‚îÄ admin_handler.py         # –ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã
‚îÇ ‚îú‚îÄ‚îÄ user_handler.py          # –ö–æ–º–∞–Ω–¥—ã —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ (/help, /status, /delete_data)
‚îÇ ‚îî‚îÄ‚îÄ callback_handlers.py     # –ò–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏ –∞–¥–º–∏–Ω–∞
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ ‚îú‚îÄ‚îÄ __init__.py
‚îÇ ‚îú‚îÄ‚îÄ validation.py            # –í–∞–ª–∏–¥–∞—Ü–∏—è –§–ò–û, –¥–∞—Ç, —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
‚îÇ ‚îî‚îÄ‚îÄ keyboards.py             # –§–∞–±—Ä–∏–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä (–∏–Ω–ª–∞–π–Ω –∏ reply)
‚îÇ
‚îú‚îÄ‚îÄ jobs/
‚îÇ ‚îú‚îÄ‚îÄ __init__.py
‚îÇ ‚îî‚îÄ‚îÄ reminder_job.py          # –§–æ–Ω–æ–≤—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é)
```

---

## üîç **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**
### **1. –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞**

- **`main.py`**: —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∑–∞–ø—É—Å–∫ polling.
- **`.env`**:

¬† ```env

¬† BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11

¬† DATABASE_URL=sqlite:///referral_bot.db

¬† ADMIN_IDS=123456789

¬† ENCRYPTION_KEY=your_fernet_key_here```
    
- **`requirements.txt`**: `aiogram`, `aiosqlite`, `python-dotenv`, `cryptography`, `apscheduler`.
- **`requirements.txt`**: `aiogram`, `aiosqlite`, `python-dotenv`, `cryptography`, `apscheduler`.
---

### **2. `config/` ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∏**

- **`settings.py`**: –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ `.env` —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π (–≤–∫–ª—é—á–∞—è –ø—Ä–æ–≤–µ—Ä–∫—É `ENCRYPTION_KEY`).

---

### **3. `core/` ‚Äî –Ø–¥—Ä–æ –±–æ—Ç–∞**

- **`bot_instance.py`**:
    - –°–æ–∑–¥–∞—ë—Ç `Dispatcher`,
    - –ü–æ–¥–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Ä–æ—É—Ç–µ—Ä—ã,
    - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `APScheduler` –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á.

---

### **4. `database/` ‚Äî –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏**

- **`db_manager.py`**:
    - –í—Å–µ CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏,
    - –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ/–¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞,
    - –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤.

> ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ: –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ PostgreSQL ‚Äî –º–µ–Ω—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ —ç—Ç–∞ –ø–∞–ø–∫–∞**.

---

### **5. `services/` ‚Äî –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞**

–ó–¥–µ—Å—å **–≤—Å—è ¬´—É–º–Ω–∞—è¬ª –ª–æ–≥–∏–∫–∞**, –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è –æ—Ç Telegram.

- **`bonus_calculator.py`**:
   ```python
   def recalculate_bonus(user_id: int) -> None:
    # —Å–≤–µ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—è –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –±–æ–Ω—É—Å–∞
   ```

- **`report_generator.py`**:
   ```python
   def generate_referral_json(user_ dict) -> str:
    # –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON –ø–æ —à–∞–±–ª–æ–Ω—É –∏–∑ –¢–ó
   ```
> ‚úÖ –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç **—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞**.
 
- **`reminder_service.py`**:
    ```python    
    def get_users_for_reminder() -> list:
     # –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
    ```

> ‚úÖ –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç¬†**—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞**.
---

### **6.¬†`handlers/`¬†‚Äî –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º**

–ö–∞–∂–¥—ã–π —Ñ–∞–π–ª ‚Äî¬†**–æ–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞**.

- **`onboarding_handler.py`**: –ø–æ–ª–Ω—ã–π¬†`FSM`¬†–¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
- **`profile_handler.py`**: –º–∏–Ω–∏-–¥–∏–∞–ª–æ–≥–∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
- **`bank_handler.py`**: –≥–∏–±—Ä–∏–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¢-–ë–∞–Ω–∫–∞ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏.
- **`admin_handler.py`**: –æ–±—Ä–∞–±–æ—Ç–∫–∞¬†`/find`,¬†`/remind`,¬†`/report`,¬†`/update_link`,¬†`/set_offer_bonus`.
- **`user_handler.py`**: –æ–±—Ä–∞–±–æ—Ç–∫–∞¬†`/delete_data`¬†–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥.

---

### **7.¬†`utils/`¬†‚Äî –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã**

- **`validation.py`**
    - `is_valid_full_name(text)`,
    - `is_valid_date(date_str)`,
- **`keyboards.py`**:
    - `get_bank_choice_kb()`,
    - `get_tbank_products_kb()`,
    - `get_main_menu_kb()`,
    - `get_phone_request_kb()`.

---

### **8. `jobs/` ‚Äî –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏**

- **`reminder_job.py`**:
```python
async def send_weekly_reminders(context):
    # —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω–æ –Ω–∞–ø–æ–º–Ω–∏—Ç—å
	# –≤—ã–∑—ã–≤–∞–µ—Ç send_reminder_to_user
```

---

## üß©¬†**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∞–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**

|–ü—Ä–∏–Ω—Ü–∏–ø|–†–µ–∞–ª–∏–∑–∞—Ü–∏—è|
|---|---|
|**–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**|View (handlers), Data (database), Logic (services).|
|**–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**|`services/`¬†–º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ Telegram.|
|**–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**|–ù–æ–≤—ã–π –±–∞–Ω–∫ = –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ¬†`bonus_calculator.py`¬†+ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞.|
|**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ü–î–Ω**|–¢–µ–ª–µ—Ñ–æ–Ω —à–∏—Ñ—Ä—É–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î.|
|**–õ—ë–≥–∫–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏**|–ö–∞–∂–¥–∞—è —Ñ—É–Ω–∫—Ü–∏—è ‚Äî –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ.|
|**–ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤**|–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¢-–ë–∞–Ω–∫–∞ —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏.|

---

## ‚ñ∂Ô∏è **–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É (–ø—Ä–∏–º–µ—Ä)**

–•–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å `/export_json` ‚Äî —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –æ–¥–Ω–æ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª–∞ –≤ JSON –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞?

1. –°–æ–∑–¥–∞–π—Ç–µ `handlers/export_handler.py`.
2. –î–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏–∫—É –≤ `services/report_generator.py`.
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–æ—É—Ç–µ—Ä –≤ `core/bot_instance.py`.

‚úÖ –ì–æ—Ç–æ–≤–æ ‚Äî –±–µ–∑ –∫–∞—Å–∞–Ω–∏—è –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞.

---

## üöÄ¬†**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã)**

### **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏**

- –ö–æ–º–∞–Ω–¥–∞:¬†`/update_link <–ø—Ä–æ–µ–∫—Ç> <–Ω–∞–∑–≤–∞–Ω–∏–µ_—Å—Å—ã–ª–∫–∏> <URL> <–±–æ—Ç> <–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞> <–∫–∞–º–ø–∞–Ω–∏—è>`
- –ü—Ä–∏–º–µ—Ä:¬†`/update_link t-bank black_classic https://t-cpa.ru/1EkIOv ValidateReferrals_Bot telegram black_golden_ticket_dec25`
- –°—Å—ã–ª–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î –∏ –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ

### **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π**

- –ö–æ–º–∞–Ω–¥–∞:¬†`/set_offer_bonus <–ø—Ä–æ–¥—É–∫—Ç> <—Å—É–º–º–∞_–¥–æ_6%> <—Å—É–º–º–∞_–ø–æ—Å–ª–µ_6%>`
- –ü—Ä–∏–º–µ—Ä:¬†`/set_offer_bonus black_classic 500 470`
- –£—á—ë—Ç –Ω–∞–ª–æ–≥–æ–≤–æ–≥–æ –≤—ã—á–µ—Ç–∞ (–ù–ü–î 6%) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π

### **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å**

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π JSON-–æ—Ç—á—ë—Ç —Å —á–∏—Å—Ç—ã–º –¥–æ—Ö–æ–¥–æ–º (–ø–æ—Å–ª–µ –≤—ã—á–µ—Ç–∞ 6% –ù–ü–î)
- –í–∫–ª—é—á–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—Å–µ–º –ø—Ä–æ–¥—É–∫—Ç–∞–º –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è**

- –†–∞–∑ –≤ –Ω–µ–¥–µ–ª—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, –Ω–µ –∑–∞–≤–µ—Ä—à–∏–≤—à–∏–º —É—Å–ª–æ–≤–∏—è
- –†—É—á–Ω–æ–π —Ç—Ä–∏–≥–≥–µ—Ä —á–µ—Ä–µ–∑¬†`/remind <—Ç–µ–ª–µ—Ñ–æ–Ω>`

### **–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¢-–ë–∞–Ω–∫–∞**

- 6 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º–∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
- –¢–µ–∫—Å—Ç—ã —Å—Ç—Ä–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –ª–µ–Ω–¥–∏–Ω–≥–∞–º
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ UTM-—Å—Å—ã–ª–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞

---

–¢–∞–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è¬†**–≤–∞—à–µ–≥–æ –±–æ—Ç–∞**¬†–∏ –ª–µ–≥–∫–æ –≤—ã–¥–µ—Ä–∂–∏—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª—é–±–æ–π –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî –æ—Ç –Ω–æ–≤—ã—Ö –±–∞–Ω–∫–æ–≤ –¥–æ –≤–µ–±-–ø–∞–Ω–µ–ª–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.